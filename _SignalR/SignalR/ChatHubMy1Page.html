<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
   <title>SignalR Simple Chat</title>
   <style type="text/css">
      .container {
         background-color: #99CCFF;
         border: thick solid #808080;
         padding: 20px;
         margin: 20px;
      }
   </style>
</head>
<body>
   <div class="container">
      <input type="text" id="wiadomosc" />
      <input type="button" id="bnWyslij" value="Wyslij" />
      <input type="hidden" id="nazwaUkryta" />
      <ul id="dyskusja"></ul>
   </div>
   <!--Script references. -->
   <!--Reference the jQuery library. -->
   <script src="Scripts/jquery-2.1.4.min.js"></script>
   <!--Reference the SignalR library. -->
   <script src="Scripts/jquery.signalR-2.2.0.min.js"></script>
   <!--Reference the autogenerated SignalR hub script. -->
   <script src="signalr/hubs"></script>
   <!--Add script to update the page and send messages.-->
   <script type="text/javascript">
      $(function () {
         // Declare a proxy to reference the hub. 
         var chat = $.connection.chatHubMy1;
         // Create a function that the hub can call to broadcast messages.
         chat.client.rozglosWiadomosc = function (nazwa, wiadomosc) {
            var zakodowanaNazwa = $('<div />').text(nazwa).html();
            var zakodowanaWiad = $('<div />').text(wiadomosc).html();
            $('#dyskusja').append('<li><strong>' + zakodowanaNazwa 
				+ '</strong>&nbsp;&nbsp;' + zakodowanaWiad + '</li>');
         };
         //pobierz nazwę usera i ją zapamiętaj
         $('#nazwaUkryta').val(prompt('Wpisz nazwę użytkownika:', ''));
         //fokus na wiadomości
         $('#wiadomosc').focus();
         //połączenie
         $.connection.hub.start().done(function () {
            $('#bnWyslij').click(function () {
               //wywołaj metodę send na hubie
               chat.server.wyslij($('#nazwaUkryta').val(), $('#wiadomosc').val());
               // Clear text box and reset focus for next comment. 
               $('#wiadomosc').val('').focus();
            });
         });

      });

   </script>



</body>
</html>
